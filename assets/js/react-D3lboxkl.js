const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/dash.all.min-49b0lzm-.js","assets/js/admin-components-D24Ek_cO.js","assets/js/rolldown-runtime-CzF6_L4l.js"])))=>i.map(i=>d[i]);
import{r as H}from"./rolldown-runtime-CzF6_L4l.js";import{a as P,c as D,l as F,o as R,s as O,u as N}from"./admin-components-D24Ek_cO.js";import{c as W,l as j}from"./react-vendor-BSVagTro.js";import{i as U,n as q,t as G}from"./classPrivateFieldSet2-DTU-rhuG.js";import{n as $,t as K}from"./dist-BvFLEbdi.js";var V=H(N(),1);O();F();var z=["src"],x=new WeakMap,I=class extends K($){constructor(...t){super(...t),U(this,x,void 0)}attributeChangedCallback(t,i,n){t!=="src"&&super.attributeChangedCallback(t,i,n),t==="src"&&i!=n&&this.load()}_initThumbnails(t){var i=this;return P(function*(){const n=(function(){var c=P(function*(d,h){const _=[],b=t.timescale||1,M=t.startNumber||1,k=t.presentationTimeOffset?t.presentationTimeOffset/b:0,f=t.segmentDuration;for(let p=0;p<d;p++){const T=J({thIndex:p,thduration:h,ttiles:d,tduration:f,startNumber:M,pto:k}),L=T+h,m=new Promise((y,g)=>{i.api.provideThumbnail(T,({url:E,width:w,height:o,x:r,y:u})=>{try{y(new VTTCue(T,L,`${E}#xywh=${r},${u},${w},${o}`))}catch(v){g(v)}})});_.push(m)}return yield Promise.all(_).catch(p=>console.error("Error processing thumbnails",p))});return function(h,_){return c.apply(this,arguments)}})(),{totalThumbnails:a,thumbnailDuration:e}=Z(t),l=yield n(a,e);let s=i.nativeEl.querySelector('track[label="thumbnails"]');s||(s=Q(),i.nativeEl.appendChild(s),s.src=X(l),s.dispatchEvent(new Event("change")))})()}load(){var t=this;return P(function*(){if(q(x,t)){t.api.attachSource(t.src);return}G(x,t,!0);const i=yield W(()=>import("./dash.all.min-49b0lzm-.js"),__vite__mapDeps([0,1,2]));t.api=i.MediaPlayer().create(),t.api.initialize(t.nativeEl,t.src,t.autoplay),t.api.on(i.MediaPlayer.events.STREAM_INITIALIZED,()=>{const n=t.api.getRepresentationsByType("video");let a=t.videoTracks.getTrackById("main");a||(a=t.addVideoTrack("main"),a.id="main",a.selected=!0),n.forEach(e=>{var l,s,c;const d=(l=(s=e.bandwidth)!==null&&s!==void 0?s:e.bitrate)!==null&&l!==void 0?l:Number.isFinite(e.bitrateInKbit)?e.bitrateInKbit*1e3:void 0,h=a.addRendition(e.id,e.width,e.height,(c=e.mimeType)!==null&&c!==void 0?c:e.codec,d);h.id=e.id}),t.videoRenditions.addEventListener("change",()=>{const e=t.videoRenditions[t.videoRenditions.selectedIndex];e!=null&&e.id?(t.api.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),t.api.setRepresentationForTypeById("video",e.id,!0)):t.api.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}})}),t.api.isDynamic()||t.api.getRepresentationsByType("image").forEach((function(){var e=P(function*(l,s){s>0||t._initThumbnails(l)});return function(l,s){return e.apply(this,arguments)}})())})})()}};D(I,"shadowRootOptions",R({},$.shadowRootOptions));D(I,"getTemplateHTML",t=>{const{src:i}=t,n=j(t,z);return $.getTemplateHTML(n)});function Z(t){var i,n;const[a,e]=t.essentialProperties[0].value.split("x").map(Number),l=a*e,s=((n=(i=t.adaptation)==null?void 0:i.period)==null?void 0:n.duration)||null,c=t.segmentDuration,d=c/(t.timescale||1)/l;return{totalThumbnails:s!=null?Math.ceil(s/d):Math.ceil(c/d),thumbnailDuration:d}}function J({thIndex:t,tduration:i,thduration:n,ttiles:a,startNumber:e,pto:l}){const s=Math.floor(t/a)+e,c=t%a+1;return(s-1)*i-l+(c-1)*n}function Q(){const t=document.createElement("track");return t.kind="metadata",t.label="thumbnails",t.srclang="en",t.mode="hidden",t.default=!0,t}function X(t){let i=`WEBVTT

`;for(const e of t)i+=`${a(e.startTime)} --> ${a(e.endTime)}
`,i+=`${e.text}

`;const n=new Blob([i],{type:"text/vtt"});return URL.createObjectURL(n);function a(e){return`${String(Math.floor(e/3600)).padStart(2,"0")}:${String(Math.floor(e%3600/60)).padStart(2,"0")}:${(e%60).toFixed(3).padStart(6,"0")}`}}globalThis.customElements&&!globalThis.customElements.get("dash-video")&&globalThis.customElements.define("dash-video",I);var Y=I;O();var tt=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),et={className:"class",htmlFor:"for"};function B(t){return t.toLowerCase()}function A(t){if(typeof t=="boolean")return t?"":void 0;if(typeof t!="function"&&!(typeof t=="object"&&t!==null))return t}function nt({react:t,tagName:i,elementClass:n,events:a,displayName:e,defaultProps:l,toAttributeName:s=B,toAttributeValue:c=A}){const d=Number.parseInt(t.version)>=19,h=t.forwardRef((_,b)=>{var M,k;const f=t.useRef(null),p=t.useRef(new Map),T={},L={},m={},y={};for(const[o,r]of Object.entries(_)){var g,E;if(tt.has(o)){m[o]=r;continue}const u=s((g=et[o])!==null&&g!==void 0?g:o);if(n.prototype&&o in n.prototype&&!(o in((E=(M=globalThis.HTMLElement)==null?void 0:M.prototype)!==null&&E!==void 0?E:{}))&&!((k=n.observedAttributes)!=null&&k.some(S=>S===u))){y[o]=r;continue}if(o.startsWith("on")){T[o]=r;continue}const v=c(r);u&&v!=null&&(L[u]=String(v),d||(m[u]=v)),u&&d&&(v!==A(r)?m[u]=v:m[u]=r)}if(typeof window!="undefined"){for(const o in T){var w;const r=T[o],u=o.endsWith("Capture"),v=((w=a==null?void 0:a[o])!==null&&w!==void 0?w:o.slice(2).toLowerCase()).slice(0,u?-7:void 0);t.useLayoutEffect(()=>{const S=f==null?void 0:f.current;if(!(!S||typeof r!="function"))return S.addEventListener(v,r,u),()=>{S.removeEventListener(v,r,u)}},[f==null?void 0:f.current,r])}t.useLayoutEffect(()=>{if(f.current===null)return;const o=new Map;for(const r in y)C(f.current,r,y[r]),p.current.delete(r),o.set(r,y[r]);for(const[r,u]of p.current)C(f.current,r,void 0);p.current=o})}if(typeof window=="undefined"&&(n!=null&&n.getTemplateHTML)&&(n!=null&&n.shadowRootOptions)){const{mode:o,delegatesFocus:r}=n.shadowRootOptions;m.children=[t.createElement("template",{shadowrootmode:o,shadowrootdelegatesfocus:r,dangerouslySetInnerHTML:{__html:n.getTemplateHTML(L,_)},key:"ce-la-react-ssr-template-shadow-root"}),m.children]}return t.createElement(i,R(R(R({},l),m),{},{ref:t.useCallback(o=>{f.current=o,typeof b=="function"?b(o):b!==null&&(b.current=o)},[b])}),m.children)});return h.displayName=e!=null?e:n.name,h}function C(t,i,n){var a,e;t[i]=n,n==null&&i in((a=(e=globalThis.HTMLElement)==null?void 0:e.prototype)!==null&&a!==void 0?a:{})&&t.removeAttribute(i)}var lt=nt({react:V.default,tagName:"dash-video",elementClass:Y,toAttributeName(t){return t==="muted"?"":t==="defaultMuted"?"muted":B(t)}});export{lt as default};

//# sourceMappingURL=react-D3lboxkl.js.map