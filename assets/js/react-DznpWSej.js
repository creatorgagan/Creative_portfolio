import{r as ie}from"./rolldown-runtime-CzF6_L4l.js";import{a as P,c as W,l as ne,o as B,s as re,u as oe}from"./admin-components-D24Ek_cO.js";import{a as ae,i as f,n as s,r as se,t as r}from"./classPrivateFieldSet2-DTU-rhuG.js";var le=ie(oe(),1);ne();var O,ue="https://open.spotify.com",de=/open\.spotify\.com\/(\w+)\/(\w+)/i,ce="https://open.spotify.com/embed-podcast/iframe-api/v1",fe="SpotifyIframeApi",pe="onSpotifyIframeApiReady";function Z(e,t={}){return`
    <style>
      :host {
        display: inline-block;
        min-width: 160px;
        min-height: 80px;
        position: relative;
      }
      iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      :host(:not([controls])) {
        display: none !important;
      }
    </style>
    <iframe${ve({src:ee(e,t),scrolling:"no",frameborder:0,width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; gyroscope; picture-in-picture"})}></iframe>
  `}function ee(e,t){var i,n,u;if(!e.src)return;const d=e.src.match(de),p=d&&d[1],E=d&&d[2],l={t:(i=t.config)==null?void 0:i.startAt,theme:((n=t.config)==null?void 0:n.theme)==="dark"?"0":null};return`${ue}/embed/${p}/${E}${(u=t.config)!=null&&u.preferVideo?"/video":""}?${me(l)}`}var S=new WeakMap,j=new WeakMap,x=new WeakMap,y=new WeakMap,g=new WeakMap,w=new WeakMap,_=new WeakMap,M=new WeakMap,k=new WeakMap,N=new WeakMap,J=new WeakSet,A=class extends((O=globalThis.HTMLElement)!==null&&O!==void 0?O:class{}){constructor(){super(),ae(this,J),W(this,"loadComplete",new Q),f(this,S,void 0),f(this,j,void 0),f(this,x,void 0),f(this,y,!1),f(this,g,!1),f(this,w,!0),f(this,_,0),f(this,M,NaN),f(this,k,!1),f(this,N,null),se(J,this,he).call(this,"config")}load(){var e=this;return P(function*(){var t,i,n;if(s(S,e))return;s(j,e)&&(e.loadComplete=new Q),r(j,e,!0),yield r(S,e,Promise.resolve()),r(S,e,null),r(y,e,!1),r(g,e,!1),r(_,e,0),r(M,e,NaN),r(k,e,!1),e.dispatchEvent(new Event("emptied"));let u=e.api;if(e.api=null,!e.src)return;e.dispatchEvent(new Event("loadstart"));const d={t:(t=e.config)==null?void 0:t.startAt,theme:((i=e.config)==null?void 0:i.theme)==="dark"?"0":null,preferVideo:(n=e.config)==null?void 0:n.preferVideo};if(s(x,e))e.api=u,e.api.iframeElement.src=ee(K(e.attributes),e);else{r(x,e,!0),e.shadowRoot||(e.attachShadow({mode:"open"}),e.shadowRoot.innerHTML=Z(K(e.attributes),e));let p=e.shadowRoot.querySelector("iframe");const E=yield ge(ce,fe,pe);e.api=yield new Promise(l=>E.createController(p,d,l)),e.api.iframeElement=p,e.api.addListener("ready",()=>{e.dispatchEvent(new Event("loadedmetadata")),e.dispatchEvent(new Event("durationchange")),e.dispatchEvent(new Event("volumechange"))}),e.api.addListener("playback_update",l=>{if(s(g,e)&&s(w,e)&&(l.data.isBuffering||!l.data.isPaused)){r(g,e,!1),e.currentTime=1;return}if(l.data.duration/1e3!==s(M,e)&&(r(g,e,!1),r(M,e,l.data.duration/1e3),e.dispatchEvent(new Event("durationchange"))),l.data.position/1e3!==s(_,e)&&(r(k,e,!1),r(g,e,!1),r(_,e,l.data.position/1e3),e.dispatchEvent(new Event("timeupdate"))),!s(y,e)&&!s(w,e)&&l.data.isPaused){r(w,e,!0),e.dispatchEvent(new Event("pause"));return}if(s(w,e)&&(l.data.isBuffering||!l.data.isPaused)){r(w,e,!1),e.dispatchEvent(new Event("play")),r(y,e,l.data.isBuffering),s(y,e)?e.dispatchEvent(new Event("waiting")):e.dispatchEvent(new Event("playing"));return}if(s(y,e)&&!l.data.isPaused){r(y,e,!1),e.dispatchEvent(new Event("playing"));return}if(!e.paused&&!e.seeking&&!s(g,e)&&Math.ceil(e.currentTime)>=e.duration){if(r(g,e,!0),e.loop){e.currentTime=1;return}e.continuous||(e.pause(),e.dispatchEvent(new Event("ended")));return}})}e.loadComplete.resolve(),yield e.loadComplete})()}attributeChangedCallback(e,t,i){var n=this;return P(function*(){if(t!==i)switch(e){case"src":n.load();return}})()}play(){var e=this;return P(function*(){var t;return r(w,e,!1),r(y,e,!0),e.dispatchEvent(new Event("play")),yield e.loadComplete,(t=e.api)==null?void 0:t.resume()})()}pause(){var e=this;return P(function*(){var t;return yield e.loadComplete,(t=e.api)==null?void 0:t.pause()})()}get config(){return s(N,this)}set config(e){r(N,this,e)}get paused(){var e;return(e=s(w,this))!==null&&e!==void 0?e:!0}get muted(){return!1}set muted(e){}get volume(){return 1}set volume(e){}get ended(){return Math.ceil(this.currentTime)>=this.duration}get seeking(){return s(k,this)}get loop(){return this.hasAttribute("loop")}set loop(e){this.loop!=e&&this.toggleAttribute("loop",!!e)}get currentTime(){return s(_,this)}set currentTime(e){if(this.currentTime==e)return;r(k,this,!0);let t=s(_,this);r(_,this,e),this.dispatchEvent(new Event("timeupdate")),r(_,this,t),this.loadComplete.then(()=>{var i;(i=this.api)==null||i.seek(e)})}get duration(){return s(M,this)}get src(){return this.getAttribute("src")}set src(e){this.setAttribute("src",`${e}`)}};function he(e){if(Object.prototype.hasOwnProperty.call(this,e)){const t=this[e];delete this[e],this[e]=t}}W(A,"getTemplateHTML",Z);W(A,"shadowRootOptions",{mode:"open"});W(A,"observedAttributes",["controls","loop","src"]);function ve(e){let t="";for(const i in e){const n=e[i];n===""?t+=` ${i}`:t+=` ${i}="${n}"`}return t}function me(e){return String(new URLSearchParams(ye(e)))}function ye(e){let t={};for(let i in e){let n=e[i];n===!0||n===""?t[i]=1:n===!1?t[i]=0:n!=null&&(t[i]=n)}return t}function K(e){let t={};for(let i of e)t[i.name]=i.value;return t}var G={};function ge(e,t,i){return q.apply(this,arguments)}function q(){return q=P(function*(e,t,i){return G[e]?G[e]:t&&self[t]?Promise.resolve(self[t]):G[e]=new Promise(function(n,u){const d=document.createElement("script");d.src=e;const p=E=>n(E);i&&(self[i]=p),d.onload=()=>!i&&p(),d.onerror=u,document.head.append(d)})}),q.apply(this,arguments)}var Q=class extends Promise{constructor(e=()=>{}){let t,i;super((n,u)=>{e(n,u),t=n,i=u}),this.resolve=t,this.reject=i}};globalThis.customElements&&!globalThis.customElements.get("spotify-audio")&&globalThis.customElements.define("spotify-audio",A);var we=A;re();var _e=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),Ee={className:"class",htmlFor:"for"};function te(e){return e.toLowerCase()}function V(e){if(typeof e=="boolean")return e?"":void 0;if(typeof e!="function"&&!(typeof e=="object"&&e!==null))return e}function be({react:e,tagName:t,elementClass:i,events:n,displayName:u,defaultProps:d,toAttributeName:p=te,toAttributeValue:E=V}){const l=Number.parseInt(e.version)>=19,z=e.forwardRef((F,b)=>{var U,D;const h=e.useRef(null),C=e.useRef(new Map),I={},Y={},v={},L={};for(const[o,a]of Object.entries(F)){var R,H;if(_e.has(o)){v[o]=a;continue}const c=p((R=Ee[o])!==null&&R!==void 0?R:o);if(i.prototype&&o in i.prototype&&!(o in((H=(U=globalThis.HTMLElement)==null?void 0:U.prototype)!==null&&H!==void 0?H:{}))&&!((D=i.observedAttributes)!=null&&D.some(T=>T===c))){L[o]=a;continue}if(o.startsWith("on")){I[o]=a;continue}const m=E(a);c&&m!=null&&(Y[c]=String(m),l||(v[c]=m)),c&&l&&(m!==V(a)?v[c]=m:v[c]=a)}if(typeof window!="undefined"){for(const o in I){var $;const a=I[o],c=o.endsWith("Capture"),m=(($=n==null?void 0:n[o])!==null&&$!==void 0?$:o.slice(2).toLowerCase()).slice(0,c?-7:void 0);e.useLayoutEffect(()=>{const T=h==null?void 0:h.current;if(!(!T||typeof a!="function"))return T.addEventListener(m,a,c),()=>{T.removeEventListener(m,a,c)}},[h==null?void 0:h.current,a])}e.useLayoutEffect(()=>{if(h.current===null)return;const o=new Map;for(const a in L)X(h.current,a,L[a]),C.current.delete(a),o.set(a,L[a]);for(const[a,c]of C.current)X(h.current,a,void 0);C.current=o})}if(typeof window=="undefined"&&(i!=null&&i.getTemplateHTML)&&(i!=null&&i.shadowRootOptions)){const{mode:o,delegatesFocus:a}=i.shadowRootOptions;v.children=[e.createElement("template",{shadowrootmode:o,shadowrootdelegatesfocus:a,dangerouslySetInnerHTML:{__html:i.getTemplateHTML(Y,F)},key:"ce-la-react-ssr-template-shadow-root"}),v.children]}return e.createElement(t,B(B(B({},d),v),{},{ref:e.useCallback(o=>{h.current=o,typeof b=="function"?b(o):b!==null&&(b.current=o)},[b])}),v.children)});return z.displayName=u!=null?u:i.name,z}function X(e,t,i){var n,u;e[t]=i,i==null&&t in((n=(u=globalThis.HTMLElement)==null?void 0:u.prototype)!==null&&n!==void 0?n:{})&&e.removeAttribute(t)}var Pe=be({react:le.default,tagName:"spotify-audio",elementClass:we,toAttributeName(e){return e==="muted"?"":e==="defaultMuted"?"muted":te(e)}});export{Pe as default};

//# sourceMappingURL=react-DznpWSej.js.map